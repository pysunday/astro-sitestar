---
import clsx from 'clsx';
import QRCode from 'qrcode';
import { getI18n } from "@/i18n/index"
import { siteConfig } from "@/site.config";

const { currentLocale } = Astro
const i18n = await getI18n(currentLocale, 'sitestar.contact')
const option = {
  margin: 0,
  type: 'svg',
  color: {
    dark: '#fafafaaa',
    light: '#00000000'
  }
};
const shows = [{
  type: 'wechat',
  qrstr: await QRCode.toString('https://u.wechat.com/EHUJATCFwHQcR-zPE3t0xt4', option),
  text: i18n('wechat_tip')
}, {
  type: 'qq',
  qrstr: await QRCode.toString('http://qm.qq.com/cgi-bin/qm/qr?k=WkIrIpzsDNS--d9JNOrdNiG_NKh8qkEF', option),
  text: i18n('qq_tip')
}];
---
<section
  id="contact"
  class={clsx(
    "bg-[#181d23] text-[#fafafa] px-4 w-full overflow-x-hidden flex justify-center items-center relative mt-[-100px]",
    "min-h-screen bg-no-repeat bg-right bg-[url(/images/sitestar/envelope.svg)]",
  )}
>
  <div class="max-w-[1400px] w-[90%] md:w-[80%] xl:w-[70%] grid grid-cols-2 gap-8 text-center pt-[200px] pb-[50px]">
    <div class="col-span-2 w-[90%] md:w-[80%] mx-auto">
      <h3 class="text-[2.4rem] leading-[2.4rem]">{i18n('title')}</h3>
      <p class="bg-[#f300b4] w-[150px] h-[2px] my-8 mx-auto" />
      <p class="text-[1.4rem] text-justify mx-auto mb-10 md:mb-20 xl:mb-30 w-[90%] md:w-[80%]">
        {i18n('tip')}
        <a href={`mailto:${siteConfig.email}`}>{siteConfig.email}</a>
      </p>
    </div>
    {
      shows.map(it => (
        <div class="w-[90%] max-w-[200px] aspect-square mx-auto">
          <div class="border border-white/50 mx-auto w-full" set:html={it.qrstr}></div>
          <div class="mt-4">{it.text}</div>
        </div>
      ))
    }
  <div class="absolute bottom-0 left-0 w-full h-[10px] bg-gradient-to-t from-black/20 to-transparent pointer-events-none z-[-1]"></div>
</section>

